INFO 2023-11-17 15:11:18,715  5276  Watching for file changes with StatReloader
INFO 2023-11-17 15:11:33,199  16744  Watching for file changes with StatReloader
INFO 2023-11-17 15:21:14,682  16744  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:21:17,190  5936  Watching for file changes with StatReloader
INFO 2023-11-17 15:21:46,281  5936  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:21:47,440  13648  Watching for file changes with StatReloader
INFO 2023-11-17 15:23:02,079  13648  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:23:03,485  9928  Watching for file changes with StatReloader
INFO 2023-11-17 15:27:18,122  9928  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:27:19,837  2600  Watching for file changes with StatReloader
INFO 2023-11-17 15:27:30,023  2600  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:27:31,886  14792  Watching for file changes with StatReloader
INFO 2023-11-17 15:28:57,988  14792  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:29:02,519  12468  Watching for file changes with StatReloader
INFO 2023-11-17 15:30:11,579  12468  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:30:13,185  14256  Watching for file changes with StatReloader
INFO 2023-11-17 15:33:24,273  14256  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 15:33:26,222  6244  Watching for file changes with StatReloader
INFO 2023-11-17 15:40:10,735  6244  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 15:40:12,471  15336  Watching for file changes with StatReloader
INFO 2023-11-17 15:47:26,430  15336  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 15:47:29,464  11136  Watching for file changes with StatReloader
INFO 2023-11-17 15:50:21,509  11136  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 15:50:23,483  10852  Watching for file changes with StatReloader
INFO 2023-11-17 15:54:14,480  10852  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 15:54:15,657  17644  Watching for file changes with StatReloader
INFO 2023-11-17 15:54:29,187  2692  Watching for file changes with StatReloader
INFO 2023-11-17 15:54:56,092  17644  254797001959 1
DEBUG 2023-11-17 15:54:56,095  17644  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 15:54:57,219  17644  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
ERROR 2023-11-17 15:54:57,353  17644  Internal Server Error: /
Traceback (most recent call last):
  File "C:\Users\Lee\PycharmProjects\daraja_apis\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lee\PycharmProjects\daraja_apis\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py", line 33, in initiate_payment
    resp = request.post(mpesa.get_payment_url(), json=data, headers=headers)
           ^^^^^^^^^^^^
AttributeError: 'WSGIRequest' object has no attribute 'post'
INFO 2023-11-17 16:01:10,016  2692  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:01:10,228  17644  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:01:11,768  13720  Watching for file changes with StatReloader
INFO 2023-11-17 16:01:11,900  18944  Watching for file changes with StatReloader
INFO 2023-11-17 16:01:19,711  13584  Watching for file changes with StatReloader
INFO 2023-11-17 16:01:30,721  18944  254797001959 1
DEBUG 2023-11-17 16:01:30,723  18944  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:01:31,806  18944  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
ERROR 2023-11-17 16:01:31,887  18944  Internal Server Error: /
Traceback (most recent call last):
  File "C:\Users\Lee\PycharmProjects\daraja_apis\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lee\PycharmProjects\daraja_apis\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py", line 35, in initiate_payment
    req = request.Request(mpesa.get_payment_url(), data=json_data, headers=headers, method='POST')
          ^^^^^^^^^^^^^^^
AttributeError: 'WSGIRequest' object has no attribute 'Request'
INFO 2023-11-17 16:03:00,339  18944  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:03:00,784  13584  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:03:02,639  4088  Watching for file changes with StatReloader
INFO 2023-11-17 16:03:08,459  10940  Watching for file changes with StatReloader
INFO 2023-11-17 16:03:16,112  4088  254797001959 1
DEBUG 2023-11-17 16:03:16,118  4088  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:03:17,074  4088  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
DEBUG 2023-11-17 16:03:17,110  4088  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:03:17,828  4088  https://sandbox.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 400 None
DEBUG 2023-11-17 16:03:17,829  4088  {'responseId': '12638-6109403-1', 'responseCode': '400', 'responseDesc': 'Duplicate json key detected'}
INFO 2023-11-17 16:03:54,691  4088  254797001959 1
DEBUG 2023-11-17 16:03:54,694  4088  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:03:55,744  4088  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
DEBUG 2023-11-17 16:03:55,748  4088  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:03:56,610  4088  https://sandbox.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 400 None
DEBUG 2023-11-17 16:03:56,612  4088  {'responseId': '42479-41840432-1', 'responseCode': '400', 'responseDesc': 'Duplicate json key detected'}
INFO 2023-11-17 16:15:59,388  4088  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:15:59,491  10940  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:16:01,482  14716  Watching for file changes with StatReloader
INFO 2023-11-17 16:16:01,564  16360  Watching for file changes with StatReloader
INFO 2023-11-17 16:18:47,965  14716  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 16:18:47,982  16360  C:\Users\Lee\PycharmProjects\daraja_apis\daraja_apis\settings.py changed, reloading.
INFO 2023-11-17 16:18:49,571  14204  Watching for file changes with StatReloader
INFO 2023-11-17 16:18:49,582  17956  Watching for file changes with StatReloader
INFO 2023-11-17 16:38:37,002  14204  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:38:37,017  17956  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 16:38:38,558  9788  Watching for file changes with StatReloader
INFO 2023-11-17 16:38:38,558  14104  Watching for file changes with StatReloader
WARNING 2023-11-17 16:39:21,693  9788  Not Found: /favicon.ico
INFO 2023-11-17 16:39:40,388  9788  254797001959 1
DEBUG 2023-11-17 16:39:40,390  9788  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:39:41,460  9788  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
DEBUG 2023-11-17 16:39:41,474  9788  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 16:39:42,221  9788  https://sandbox.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 400 None
DEBUG 2023-11-17 16:39:42,222  9788  {'responseId': '12637-6184379-1', 'responseCode': '400', 'responseDesc': 'Duplicate json key detected'}
INFO 2023-11-17 17:13:32,522  9788  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 17:13:32,768  14104  C:\Users\Lee\PycharmProjects\daraja_apis\main_app\views.py changed, reloading.
INFO 2023-11-17 17:13:33,951  9680  Watching for file changes with StatReloader
INFO 2023-11-17 17:13:33,971  8768  Watching for file changes with StatReloader
INFO 2023-11-17 17:13:43,541  9680  254797001959 1
INFO 2023-11-17 17:14:03,587  9680  254797001959 1
INFO 2023-11-17 22:49:39,754  7780  Watching for file changes with StatReloader
INFO 2023-11-17 22:50:13,711  9420  Watching for file changes with StatReloader
INFO 2023-11-17 22:50:32,513  7780  254797001959 1
DEBUG 2023-11-17 22:50:32,516  7780  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 22:50:34,097  7780  https://sandbox.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 None
DEBUG 2023-11-17 22:50:34,132  7780  Starting new HTTPS connection (1): sandbox.safaricom.co.ke:443
DEBUG 2023-11-17 22:50:35,531  7780  https://sandbox.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 None
DEBUG 2023-11-17 22:50:35,534  7780  {'MerchantRequestID': '82190-111364347-1', 'CheckoutRequestID': 'ws_CO_17112023225338570797001959', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}
INFO 2023-11-17 22:50:35,534  7780  82190-111364347-1 ws_CO_17112023225338570797001959
